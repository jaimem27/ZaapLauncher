<Window x:Class="ZaapLauncher.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ZaapLauncher"
        Width="1000"
        Height="600"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        Background="#0B1220"
        WindowStyle="None"
        AllowsTransparency="False">

    <Window.Resources>

        <!-- Portal breath -->
        <Storyboard x:Key="PortalBreath" RepeatBehavior="Forever" AutoReverse="True">
            <DoubleAnimation Storyboard.TargetName="PortalBaseImage"
                             Storyboard.TargetProperty="Opacity"
                             From="0.90" To="0.98"
                             Duration="0:0:3.5"/>
        </Storyboard>

        <!-- Vortex rotate (brush) -->
        <Storyboard x:Key="VortexBrushRotate" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="VortexBrush"
                             Storyboard.TargetProperty="(Brush.RelativeTransform).(RotateTransform.Angle)"
                             From="0" To="360"
                             Duration="0:0:10"/>
        </Storyboard>

        <!-- PLAY button style -->
        <Style x:Key="PlayButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="210"/>
            <Setter Property="Height" Value="60"/>
            <Setter Property="Background" Value="#3B82F6"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>

                            <!-- Glow externo -->
                            <Border x:Name="Glow"
                            CornerRadius="20"
                            Opacity="0">
                                <Border.Effect>
                                    <DropShadowEffect Color="#38BDF8"
                                              BlurRadius="50"
                                              ShadowDepth="0"
                                              Opacity="0.9"/>
                                </Border.Effect>
                            </Border>

                            <!-- Root -->
                            <Border x:Name="Root"
                            CornerRadius="20"
                            Background="{TemplateBinding Background}"
                            BorderThickness="1"
                            BorderBrush="#00000000"
                            SnapsToDevicePixels="True">

                                <!-- Recorte real -->
                                <Grid ClipToBounds="True">

                                    <!-- ✅ Brillo superior (recortado) -->
                                    <Border CornerRadius="20"
                                    Opacity="0.16">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>

                                    <!-- ✅ Highlight diagonal tipo cristal -->
                                    <Rectangle Opacity="0.10" Margin="-40,-10,0,0">
                                        <Rectangle.Fill>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                <GradientStop Color="#40FFFFFF" Offset="0"/>
                                                <GradientStop Color="#00FFFFFF" Offset="0.55"/>
                                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="-12" CenterX="0.5" CenterY="0.5"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>

                                    <!-- ✅ Borde interno sutil (glass edge) -->
                                    <Border CornerRadius="18"
                                    Margin="2"
                                    BorderThickness="1"
                                    BorderBrush="#26FFFFFF"
                                    IsHitTestVisible="False"/>

                                    <!-- Texto -->
                                    <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                                </Grid>

                                <!-- Sombra base -->
                                <Border.Effect>
                                    <DropShadowEffect Color="#000000"
                                              BlurRadius="20"
                                              ShadowDepth="6"
                                              Opacity="0.35"/>
                                </Border.Effect>
                            </Border>
                        </Grid>

                        <ControlTemplate.Triggers>

                            <!-- Hover -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Glow" Property="Opacity" Value="1"/>
                                <Setter TargetName="Root" Property="BorderBrush" Value="#80BDF8FF"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.04" ScaleY="1.04"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>

                            <!-- Press -->
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.97" ScaleY="0.97"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Glow" Property="Opacity" Value="0.6"/>
                            </Trigger>

                            <!-- Disabled -->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Root" Property="Opacity" Value="0.55"/>
                            </Trigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


    </Window.Resources>

    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard Storyboard="{StaticResource PortalBreath}" />
        </EventTrigger>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard Storyboard="{StaticResource VortexBrushRotate}" />
        </EventTrigger>
    </Window.Triggers>

    <Border Background="#0B1220" CornerRadius="18" Margin="12">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="56" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0"
                  Background="#111B2E"
                  MouseLeftButtonDown="Header_MouseLeftButtonDown">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Vertical" Margin="18,10,0,0">
                    <TextBlock Text="ZaapLauncher"
                               Foreground="#D7E3FF"
                               FontSize="18"
                               FontWeight="SemiBold" />
                    <TextBlock Text="Conectando con el Mundo de los doce"
                               Foreground="#90A4C3"
                               FontSize="11"
                               Margin="0,2,0,0" />
                </StackPanel>

                <StackPanel Grid.Column="1"
                            Orientation="Horizontal"
                            VerticalAlignment="Center"
                            Margin="0,0,14,0">

                    <Border Background="#0E1A2F"
                            CornerRadius="999"
                            Padding="10,6"
                            Margin="0,0,10,0">
                        <StackPanel Orientation="Horizontal">
                            <Ellipse Width="8" Height="8" Margin="0,0,8,0"
                                     Fill="{Binding ServerStatusColor}" />
                            <TextBlock Text="{Binding ServerStatusText}"
                                       Foreground="#D7E3FF"
                                       FontSize="12" />
                        </StackPanel>
                    </Border>

                    <Button Width="40"
                            Height="32"
                            Background="#0E1A2F"
                            Foreground="#D7E3FF"
                            BorderThickness="0"
                            Cursor="Hand"
                            ToolTip="Join Discord"
                            Click="Discord_Click"
                            Margin="0,0,10,0">
                        <TextBlock Text="⌁"
                                   FontSize="16"
                                   FontWeight="Bold"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center" />
                    </Button>

                    <Button Content="✕"
                            Width="44"
                            Height="32"
                            Background="#0E1A2F"
                            Foreground="#D7E3FF"
                            BorderThickness="0"
                            Cursor="Hand"
                            Click="Close_Click" />
                </StackPanel>
            </Grid>

            <!-- Body -->
            <Grid Grid.Row="1" Margin="18">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="340" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Left -->
                <Border Background="#0E1A2F"
                        CornerRadius="16"
                        Padding="16"
                        Opacity="0.95">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <TextBlock Text="News"
                                   Foreground="#D7E3FF"
                                   FontSize="13"
                                   FontWeight="SemiBold" />

                        <ScrollViewer Grid.Row="1" Margin="0,12,0,0">
                            <TextBlock Text="{Binding NewsText}"
                                       Foreground="#90A4C3"
                                       FontSize="12"
                                       TextWrapping="Wrap" />
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- Right -->
                <Border Grid.Column="1"
                        Background="#0E1A2F"
                        CornerRadius="16"
                        Padding="16"
                        Margin="16,0,-24,0"
                        Opacity="0.95">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- Portal area -->
                        <Grid HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Width="560"
                              Height="420">

                            <!-- HALO GRANDE -->
                            <Ellipse Width="520"
                                     Height="520"
                                     HorizontalAlignment="Left"
                                     VerticalAlignment="Top"
                                     Margin="20,-10,0,0"
                                     Opacity="0.18"
                                     IsHitTestVisible="False"
                                     RenderTransformOrigin="0.5,0.5"
                                     Panel.ZIndex="15">
                                <Ellipse.RenderTransform>
                                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                                </Ellipse.RenderTransform>

                                <Ellipse.Fill>
                                    <RadialGradientBrush Center="0.5,0.5" RadiusX="0.55" RadiusY="0.55">
                                        <GradientStop Color="#4038BDF8" Offset="0"/>
                                        <GradientStop Color="#0038BDF8" Offset="1"/>
                                    </RadialGradientBrush>
                                </Ellipse.Fill>

                                <Ellipse.Triggers>
                                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                        <BeginStoryboard>
                                            <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                                                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                                 From="0.12" To="0.22"
                                                                 Duration="0:0:3.4"/>
                                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                                                 From="0.99" To="1.03"
                                                                 Duration="0:0:3.4"/>
                                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                                 From="0.99" To="1.03"
                                                                 Duration="0:0:3.4"/>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>

                            <!-- HALO PEQUEÑO -->
                            <Ellipse Width="360"
                                     Height="340"
                                     HorizontalAlignment="Left"
                                     VerticalAlignment="Top"
                                     Margin="108,60,0,0"
                                     Opacity="0.45"
                                     IsHitTestVisible="False"
                                     RenderTransformOrigin="0.5,0.5"
                                     Panel.ZIndex="20">
                                <Ellipse.RenderTransform>
                                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                                </Ellipse.RenderTransform>

                                <Ellipse.Fill>
                                    <RadialGradientBrush Center="0.5,0.5" RadiusX="0.55" RadiusY="0.55">
                                        <GradientStop Color="#8038BDF8" Offset="0"/>
                                        <GradientStop Color="#0038BDF8" Offset="1"/>
                                    </RadialGradientBrush>
                                </Ellipse.Fill>

                                <Ellipse.Triggers>
                                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                        <BeginStoryboard>
                                            <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                                                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                                 From="0.32" To="0.52"
                                                                 Duration="0:0:2.7"/>
                                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                                                 From="0.98" To="1.05"
                                                                 Duration="0:0:2.7"/>
                                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                                 From="0.98" To="1.05"
                                                                 Duration="0:0:2.7"/>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>

                            <!-- Portal frame -->
                            <Border CornerRadius="18"
                                    ClipToBounds="True"
                                    Width="600"
                                    Height="360"
                                    Panel.ZIndex="10">
                                <Grid>
                                    <Image x:Name="PortalBaseImage"
                                           Source="/Assets/portal.jpg"
                                           Stretch="UniformToFill"
                                           Opacity="0.92"
                                           Margin="-98,0,-60,0"/>

                                    <Ellipse Width="305"
                                             Height="292"
                                             HorizontalAlignment="Left"
                                             VerticalAlignment="Top"
                                             Margin="130,86,0,0"
                                             Opacity="1"
                                             IsHitTestVisible="False">
                                        <Ellipse.Fill>
                                            <ImageBrush x:Name="VortexBrush"
                                                        ImageSource="/Assets/vortex.png"
                                                        Stretch="UniformToFill"
                                                        AlignmentX="Center"
                                                        AlignmentY="Center">
                                                <ImageBrush.RelativeTransform>
                                                    <RotateTransform Angle="0" CenterX="0.5" CenterY="0.5"/>
                                                </ImageBrush.RelativeTransform>
                                            </ImageBrush>
                                        </Ellipse.Fill>
                                    </Ellipse>

                                    <Rectangle>
                                        <Rectangle.Fill>
                                            <RadialGradientBrush RadiusX="0.85" RadiusY="0.85"
                                                                 Center="0.5,0.45" GradientOrigin="0.5,0.45">
                                                <GradientStop Color="#00000000" Offset="0"/>
                                                <GradientStop Color="#880B1220" Offset="1"/>
                                            </RadialGradientBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>

                                    <Rectangle VerticalAlignment="Bottom" Height="140">
                                        <Rectangle.Fill>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop Color="#00000000" Offset="0"/>
                                                <GradientStop Color="#0E1A2F" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>
                                </Grid>
                            </Border>

                            <!-- Oscurecido circular -->
                            <Ellipse Width="250"
                                     Height="250"
                                     VerticalAlignment="Top"
                                     Margin="155,161,155,0"
                                     Opacity="1"
                                     Panel.ZIndex="30">
                                <Ellipse.Fill>
                                    <RadialGradientBrush Center="0.5,0.5"
                                                         GradientOrigin="0.5,0.5"
                                                         RadiusX="0.60"
                                                         RadiusY="0.60">
                                        <GradientStop Color="#E60B1220" Offset="0"/>
                                        <GradientStop Color="#800B1220" Offset="0.45"/>
                                        <GradientStop Color="#000B1220" Offset="1"/>
                                    </RadialGradientBrush>
                                </Ellipse.Fill>
                            </Ellipse>

                            <!-- PLAY -->
                            <Button Style="{StaticResource PlayButtonStyle}"
                                    VerticalAlignment="Top"
                                    HorizontalAlignment="Center"
                                    Margin="0,256,0,0"
                                    Panel.ZIndex="40">
                                <TextBlock Text="PLAY"/>
                            </Button>
                        </Grid>

                        <!-- Status text -->
                        <StackPanel Grid.Row="1"
                                    Margin="0,12,0,0"
                                    HorizontalAlignment="Center">
                            <TextBlock Text="{Binding StatusTitle}"
                                       Foreground="#D7E3FF"
                                       FontSize="13"
                                       FontWeight="SemiBold"
                                       HorizontalAlignment="Center" />
                            <TextBlock Text="{Binding StatusSubtitle}"
                                       Foreground="#90A4C3"
                                       FontSize="12"
                                       Margin="0,4,0,0"
                                       HorizontalAlignment="Center" />
                        </StackPanel>

                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
